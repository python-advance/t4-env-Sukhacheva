# Виртуальное окружение 

### Что такое виртуальная среда?
В корне своем, главная задача виртуальной среды Python – создание изолированной среды для проектов Python.

Это значит, что:

"Каждый проект может иметь свои собственные зависимости, вне зависимости от того, какие зависимости у другого проекта."

И так, в нашем небольшом примере вверху, нам просто нужно создать раздельную виртуальную среду для проектов А и Б. Каждая среда, в свою очередь, сможет зависеть от любой версии проекта В, независимо друг от друга.

Это хорошо тем, что у нас нет ограничений на то, в скольких экземплярах будет наша виртуальная среда, так как они являются обычными каталогами, в которых содержится несколько скриптов. Плюс, их очень легко создать при помощи инструментов командной строки virtualenv или pyenv.

## virtualenv

Перед тем, как начать: если вы не пользуетесь Python 3, вам нужно будет установить инструмент virtualenv при помощи pip:
$ pip install virtualenv

Если вы используете Python 3, у вас уже должен быть модуль venv, установленный в стандартной библиотеке.

Предположим, что вы пользуетесь последней версией инструмента venv, так как между ним и virtualenv существует несколько различий в отношении команд. По большому счету, это два весьма разных инструмента.

Начнем с создания нового каталога, с которым мы будем работать:
mkdir python-virtual-environments && cd python-virtual-environments

Создание новой виртуальной среды внутри каталога:
 Python 2:
$ virtualenv env
 
 Python 3
$ python3 -m venv env

"По умолчанию, это не включает в себя ни один из существующих сторонних пакетов."

## venv
Подход venv в Python 3 обладает преимуществом, которое вынуждает вас использовать определенную версию интерпретатора Python 3, который будет использован для создания виртуальной среды. Таким образом, вы избегаете недоразумений при выяснении, какая инсталляция Python базируется в новой виртуальной среде.

Начиная с Python 3.3 и 3.4, рекомендуемый способ создания виртуального пространства – это использование инструмента командной строки pyvenv, который также включен в инсталляцию вашего Python 3 по умолчанию. Однако, в версии 3.6 и выше, вам нужен python3 -m venv.

В примере выше, эта команда создает каталог под названием «env», структура каталога которого схожа со следующей:

├── bin

│   ├── activate

│   ├── activate.csh

│   ├── activate.fish

│   ├── easy_install

│   ├── easy_install-3.5

│   ├── pip

│   ├── pip3

│   ├── pip3.5

│   ├── python -> python3.5

│   ├── python3 -> python3.5

│   └── python3.5 -> /Library/Frameworks/Python.framework/Versions/3.5/bin/python3.5

├── include

├── lib

│   └── python3.5

│       └── site-packages

└── pyvenv.cfg

### Что находится в этих папках?
-- bin – файлы, которые взаимодействуют с виртуальной средой;

-- include – С-заголовки, компилирующие пакеты Python;

-- lib – копия версии Python вместе с папкой «site-packages», в которой установлена каждая зависимость.

Далее, у нас есть копии или символические ссылки нескольких различных инструментов Python. Эти файлы используются для обеспечения того, чтобы команды и код Python выполнялись в контексте нынешней среды, таким образом, достигается изоляция от глобальной среды. Мы рассмотрим это детальнее в следующем разделе.

Более интересные сейчас – скрипты activate в папке bin. Эти скрипты используются для настройки вашей оболочки для использования исполняемого файла среды Python и его сайтовых пакетов по умолчанию.

Чтобы использовать эти пакеты (или ресурсы) среды в изоляции, вам нужно «активировать» их. Чтобы сделать это, просто запустите:
source env/bin/activate

## pyvenv и pyenv
В отличие от старого virtualenv, pyvenv не поддерживает создание виртуальной среды в произвольных версиях Python. Это значит, что вам придется использовать установленный Python 3 по умолчанию для каждой создаваемой вами виртуальной среды. Хотя вы можете обновить среду до последней системной версии Python (через опцию –upgrade) если она поменялась, вы все еще не можете указывать конкретную версию.

Существует предостаточно способов установить Python, но только некоторые из них достаточно простые или гибкие, чтобы повторно удалять и переустанавливать разные бинарные версии файлов.

Здесь и вступает в игру pyenv.

Несмотря на схожесть в названиях (pyvenv и pyenv), pyenv отличается тем, что он направлен на то, чтобы помочь переключаться между версиями Python на как на системном уровне, так и на проектном. Другими словами, задача pyvenv разделять модули, задача pyenv – разделять версии Python.

Вы можете начать с установки pyenv как при помощи Homebrew (на OS X), или при помощи проекта pyenv-installer:

Homebrew

$ brew install pyenv

pyenv-installer

$ curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash

"К сожалению, pyenv не поддерживается Windows. Вы можете воспользоваться альтернативами в виде pywin и anyenv."

После установки pyenv в вашей системе, есть несколько базовых команд, которые вас могут заинтересовать:

КОД # Install new version установка новой версии

КОД # Внесение установленных версий в список

КОД # Выполнение «python-V» с использованием версии pyenv

## pipfile и pipenv
Pipenv - это обертка над pip virtualenv и Pipfile. Он значительно упрощает работу с проектом. С его помощью мы можем создавать виртуальные среды и устанавливать зависимости. Но при этом будет создаваться Pipfile, в который все установленные зависимости будут заноситься автоматически:

pipenv --three
pipenv shell
pipenv install webdriver_mamanger selenium requests
Pipfile:

[[source]]
url = "https://pypi.org/simple"
verify_ssl = true

[packages]
requests = "*"
webdriver_manager = "*"
selenium = "*"
